# –ü–∞–≤–ª–æ–≤ –î.–í. –ò–£7-13–ë
# –°–æ—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å—É–º–º—ã —Ä—è–¥–∞ (–ø–æ –≤–∞—Ä–∏–∞–Ω—Ç—É) —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ —á–ª–µ–Ω–∞
# —Ä—è–¥–∞ Œµ. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–∑–≤–æ–ª—è—Ç—å –∑–∞–¥–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ
# –≤–∞—Ä–∏–∞–Ω—Ç—É), —Ç–æ—á–Ω–æ—Å—Ç—å, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π –∏ —à–∞–≥ –ø–µ—á–∞—Ç–∏. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ
# –≤—ã–≤–µ—Å—Ç–∏ —Ç–∞–±–ª–∏—Ü—É –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π —Å –∑–∞–¥–∞–Ω–Ω—ã–º —à–∞–≥–æ–º (–Ω–æ–º–µ—Ä –∏—Ç–µ—Ä–∞—Ü–∏–∏,
# –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —á–ª–µ–Ω–∞, –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—É–º–º—ã) –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç - –≤—ã—á–∏—Å–ª–µ–Ω–Ω–æ–µ
# –∑–Ω–∞—á–µ–Ω–∏–µ —Å—É–º–º—ã —Ä—è–¥–∞ –ª–∏–±–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –∑–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ –∏—Ç–µ—Ä–∞—Ü–∏–π
# –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–∏—á—å –Ω–µ —É–¥–∞–ª–æ—Å—å.
# s = 4 (1 ‚àí1 / 3 + 1 / 5 + ‚Ä¶ + (‚àí 1)^ùëõ‚àí1 * 1 / 2ùëõ‚àí1  + ‚Ä¶)

# –ë–ª–æ–∫ –≤–≤–æ–¥–∞ –∑–Ω–∞—á–µ–Ω–∏–π
eps = float(input("–í–≤–µ–¥–∏—Ç–µ —Ç–æ—á–Ω–æ—Å—Ç—å: "))
max_iters = int(input("–í–≤–µ–¥–∏—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π: "))
step = int(input("–í–≤–µ–¥–∏—Ç–µ —à–∞–≥ –ø–µ—á–∞—Ç–∏: "))

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å
if eps <= 0 or max_iters <= 0 or step <= 0 or step >= max_iters:
    print("–î–∞–Ω–Ω—ã–µ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã")
else:
    s = 0  # —Å—É–º–º–∞ —Ä—è–¥–æ–≤
    t = 1  # —Ç–µ–∫—É—â–∞—è —Å—É–º–º–∞
    n_finishing = 0  # –∫–æ–ª-–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º —Å—É–º–º–∞ –≤—ã—á–∏—Å–ª–∏–ª–∞—Å—å
    is_finishing = False  # —Ñ–ª–∞–≥ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã—á–∏—Å–ª–∏–ª–∞—Å—å –ª–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
    is_not_countable = False  # —Ñ–ª–∞–≥ –ø—Ä–æ–≤–µ—Ä–∫–∏ —É–¥–∞–ª–æ—Å—å –ª–∏ –Ω–∞–º –ø–æ—Å—á–∏—Ç–∞—Ç—å —Å—É–º–º—É –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∫–æ–ª-–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π

    # –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –Ω–∞ —Ç–æ, –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏ –æ–Ω–∞ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
    if abs(t) < eps:
        print(f"–°—É–º–º–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ä—è–¥–∞ - {0}, –≤—ã—á–∏—Å–ª–µ–Ω–∞ –∑–∞ {1} –∏—Ç–µ—Ä–∞—Ü–∏—é")
    else:
        # –ë–ª–æ–∫ –≤—ã–≤–æ–¥–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Ç–∞–±–ª–∏—Ü—ã
        print('-' * 42)
        print(f"| {'‚Ññ –∏—Ç–µ—Ä–∞—Ü–∏–∏':^12} | {'t':^10} | {'s':^10} |")
        print('-' * 42)
        for n in range(1, max_iters + 1):
            t = (-1) ** (n - 1) / (2 * n - 1)
            if abs(t) >= eps:
                s += t
                if (n - 1) % step == 0 or step == 1:
                    print(f"| {n:^12} | {t:^10.5g} | {4 * s:^10.5g} |")
                n_finishing = n
            else:
                is_finishing = True
            if n == max_iters and abs(t) >= eps:
                is_not_countable = True
            if is_finishing:
                break
        print('-' * 42)
        if is_not_countable:
            print("–ó–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ –∏—Ç–µ—Ä–∞—Ü–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–∏—á—å –Ω–µ —É–¥–∞–ª–æ—Å—å.")
        else:
            print(f"–°—É–º–º–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ä—è–¥–∞ - {4 * s:.5g}, –≤—ã—á–∏—Å–ª–µ–Ω–∞ –∑–∞ {n_finishing} –∏—Ç–µ—Ä–∞—Ü–∏–π")
